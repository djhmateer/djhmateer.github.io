---
layout: post
title: Next.js 
description: 
menu: review
categories: js 
published: true 
comments: false     
sitemap: false
image: /assets/2024-11-12/1.jpg
---

<!-- [![alt text](/assets/2025-01-13/5.jpg "email"){:width="500px"}](/assets/2025-01-13/5.jpg)  -->


Lets setup Next.js, and get simplest possible thing working

- Next.js

```bash
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.1/install.sh | bash

# 0.40.1 on 4th Nov 24
nvm --version

# Node.js (LTS) if 22.14.0 on 5th Mar 2025 
nvm install --lts
node --version

# 11.1.0
# **HERE - interestingly my rgb machine didn't ask to be updated and is on  10.9.2**
npm install -g npm@11.1.0

# 11.1.0
npm --version

# npm install -g typescript
# 5.8.2 on 5th March 2025
# tsc -v
# run TS on Node without precompile
# npm install -g tsx --verbose

# recommended alternative to npm
npm install -g pnpm


# create next app - 15.2.1
# creates a new directory
npx create-next-app@latest nextjs-dashboard --example "https://github.com/vercel/next-learn/tree/main/dashboard/starter-example" --use-pnpm

# install
pnpm i
# start dev server on http://localhost:3000
pnpm run dev
pnpm dev

# do a build
pnpm run build
# run build app in prod mode
pnpm start
```

[starter example on gh](https://github.com/vercel/next-learn/tree/main/dashboard/starter-example) and there is a final example there too.

[![alt text](/assets/2025-03-05/1.jpg "email")](/assets/2025-03-05/1.jpg) 

Wow 550MB in node_modules for a demo project. Controlled from `package.json`

- /app - routes... this is where mostly working from
- /app/lib - functions, data fetching
- /app/ui - UI components eg cards, tables, forms
- /public - static assets

```ts
// /app/lib/placeholder-data.ts
const invoices = [
  {
    customer_id: customers[0].id,
    amount: 15795,
    status: 'pending',
    date: '2022-12-06',
  },
  {
    customer_id: customers[1].id,
    amount: 20348,
    status: 'pending',
    date: '2022-11-14',
  },
  // ...
];
```

then
```ts
// /app/lib/definitions.ts - usually generated eg
// by ORM drizzle which auto gens types based on db schema
export type Invoice = {
  id: string;
  customer_id: string;
  amount: number;
  date: string;
  // In TypeScript, this is called a string union type.
  // It means that the "status" property can only be one of the two strings: 'pending' or 'paid'.
  status: 'pending' | 'paid';
};
```

### Layout.tsx

Let's add /app/ui/global.css to our top level component by patching into `/app/layout.tsx`


```ts
import '@/app/ui/global.css';
 
export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  );
}
```

### page.tsx

### <Image>

- prevent layout shift when images are loading
- resize images automatically to avoid shipping large images to devices with small viewport
- lazy loading
- serve images in modern formats like WebP and AVIF if browser supports 

### ch4 - layouts and pages


