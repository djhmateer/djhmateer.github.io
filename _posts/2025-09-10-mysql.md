---
layout: post
# title: Pull Requests 
description: 
menu: review
categories: s3 
published: true 
comments: false     
sitemap: false
image: /assets/2024-05-03/4.jpg
---

<!-- [![alt text](/assets/2025-08-30/6.jpg "Volcano")](/assets/2025-08-30/6.jpg) -->

## WSL2 Ubuntu 24

```bash

```

I've actually got PostgreSQL running on the same wsl2 instance 172.23.16.249:5432


### dbeaver

A db viewer written in Java.

multi-statments

alt-X to execute script (and not play it)

diagramming - to add notes you need a custom diagram. Then couldn't get it to show primary key icon

### MySQL Workbench

Trying this for diagramming

database, reverse engineer - to make a diagram


ctrl shift enter - run selected sql



## encoding collations

utf8mb4_unicode_ci 

Newer (and default for Mysql8) is 

utf8mb4_0900_ai_ci 
 case insensitive

```sql
-- creating a new db with older collation for testing
CREATE DATABASE test
  CHARACTER SET utf8mb4
  COLLATE utf8mb4_unicode_ci;

-- newer default collation here (am testing)
-- making sure user can create a table
CREATE TABLE dave.stuff (
	id INTEGER NULL
)
ENGINE=InnoDB
DEFAULT CHARSET=utf8mb4
COLLATE=utf8mb4_0900_ai_ci;

```

## Docker

I had to explore a MySQL script so spun it up in docker and used a GUI

In dragnet code

```bash
# create .env
cat <<EOF > .env
MYSQL_ROOT_PASSWORD=supersecret
MYSQL_DATABASE=appdb
MYSQL_USER=appuser
MYSQL_PASSWORD=appsecret
EOF

# create docker-compose.yml
cat <<'EOF' > docker-compose.yml
services:
  mysql:
    image: mysql:8.4
    container_name: mysql84
    restart: unless-stopped
    environment:
      MYSQL_ROOT_PASSWORD: ${MYSQL_ROOT_PASSWORD}
      MYSQL_DATABASE: ${MYSQL_DATABASE}
      MYSQL_USER: ${MYSQL_USER}
      MYSQL_PASSWORD: ${MYSQL_PASSWORD}
    ports:
      - "3306:3306"
    volumes:
      - mysql_data:/var/lib/mysql
      - ./init:/docker-entrypoint-initdb.d

volumes:
  mysql_data:
EOF

# optional init SQL
cat <<EOF > init/001-create-starter.sql
CREATE TABLE IF NOT EXISTS notes (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  title VARCHAR(200) NOT NULL,
  body TEXT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
EOF


docker compose up

# detached mode
docker compose up -d
```

Used dbeaver as gui

https://chatgpt.com/c/68c030d7-da90-832c-8d30-a7e8ed1475ad

`Public Key Retrieval is not allowed` - error message

1. The quick DBeaver fix (no server changes)

When editing your connection in DBeaver:

Go to Connection Settings → Driver Properties.

Add property:

allowPublicKeyRetrieval = true

(also check useSSL=false if you’re just local dev)

Save → Test Connection → should succeed.

This is safe enough for local containers.
