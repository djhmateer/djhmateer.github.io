---
layout: post
# title: Download vs View a PDF or Image from .NET6 Razor Pages 
# description: Download vs View a PDF or Image from .NET6 Razor Pages with source code
menu: review
categories: Python 
published: true 
comments: false     
sitemap: true
image: /assets/2022-03-10/view.jpg 
---
<!-- [![alt text](/assets/2022-03-09/vsc.jpg "desktop"){:width="500px"}](/assets/2022-03-09/vsc.jpg) -->
<!-- [![alt text](/assets/2022-03-10/down.jpg "desktop")](/assets/2022-03-10/down.jpg) -->

[Python.org](https://www.python.org/downloads/) is currently on 3.10.2 (16th March 2022)

[https://github.com/bellingcat/auto-archiver](https://github.com/bellingcat/auto-archiver) the library I'm exploring

[Previous python blog](/2021/06/09/python)

On my WSL2 Ubuntu 18.04 instance lets recap:

[https://docs.python-guide.org/starting/install3/linux/#install3-linux](https://docs.python-guide.org/starting/install3/linux/#install3-linux) python guide docs

```bash
# 3.6.9
python3 -V

# 3.9.10
python3.9 -V

# 3.10.2
python3.10 -V


# Pip is a tool for installing Python packages from PyPI
## 22.0.45 from /home/dave/.local/lib/python3.9/site-packages/pip (python 3.9)
pip3 --version

# I've got lots of tools installed... lets isolate in a virtual environment below
pip3 list

# on Ubuntu pip refers to python2 and pip3 refers to python3.. 
# on virtual environments we don't care about that
command -v pip3
```

## Pipenv - Virtual Environments

This is a [hot topic](https://stackoverflow.com/questions/41573587/what-is-the-difference-between-venv-pyvenv-pyenv-virtualenv-virtualenvwrappe?rq=1) and complex. But as the [tool I'm exploring](https://github.com/bellingcat/auto-archiver) uses it, then I'll stick with it.

[Digital Ocean on Ubuntu 20](https://www.digitalocean.com/community/tutorials/how-to-install-python-3-and-set-up-a-programming-environment-on-an-ubuntu-20-04-server) use [venv](https://docs.python.org/3/library/venv.html)

[https://docs.python-guide.org/starting/install3/linux/#pipenv-virtual-environments](https://docs.python-guide.org/starting/install3/linux/#pipenv-virtual-environments) guide

Python virtual environments allow you to install python modules in an isolated location for a specific project.

[https://pypi.org/project/pipenv/](https://pypi.org/project/pipenv/)

[https://pipenv.pypa.io/en/latest/](https://pipenv.pypa.io/en/latest/) documentation

```bash
# this worked
# and looks like it has used python3.9
pip install pipenv

# maybe should have done this https://docs.python-guide.org/dev/virtualenvs/
# https://pipenv.pypa.io/en/latest/install/#pragmatic-installation-of-pipenv
# essentially a pragmatic install if have existing toolchains
# which I don't really, so can ignore.
pip install --user pipenv

cd project-folder

# install Requests library and create 
# Pipfile - used to track dependencies
pipenv install requests
```

[![alt text](/assets/2022-03-16/1.jpg "desktop")](/assets/2022-03-16/1.jpg)

It worked. First use of pipenv.

```py
# requests module
import requests

response = requests.get('https://httpbin.org/ip')
print('Your IP is {0}'.format(response.json()['origin']))

x = requests.get('https://w3schools.com/python/demopage.htm')
print(x.text)
```

then run with 

```bash
# it worked giving my ip address
pipenv run python main.py

# by using code below I could tell it was using the Python 3.9.10 interpreter
```

## What Version of Python is my program running?

- Python3.9.10 running when I do python3.9 script.py
- Pip 22.0.4
- Pipenv 2022.1.8

```py
import sys

print("Hello world")

# 3.9.10 when run with python3.9 script.py
# 3.6.9 when run with python3 script.py
# 2.7.17 when run with python script.py
print(sys.version)
```

## Pipenv

```bash
cd project-folder

# get dependencies for this projet
pipenv install

# install requests library in this project
pipenv install requests

# install specific version of flask
pipenv install flask==0.12.1

#
pipenv install numpy


# activate the shell!
pipenv shell

# can now run 
# this works running 3.9.10 as the interpreter
python main.py

# run command inside the virtual env
# running 3.9.10 
pipenv run python main.py
```

So this is excellent - I now have the correct version of python and dependencies under a virtual environment.

## Updating Python to 3.10 (latest) 

```bash
# 3.8.10
python3 -V

sudo add-apt-repository ppa:deadsnakes/ppa

sudo apt install python3.10

# need this for pipenv otherwise get ModuleNotFoundError: No module named 'distutils.cmd' error
sudo apt install python3.10-distutils

# 3.10.2
python3.10 -V

# create new virtual environment for new version of python
# if just do pipenv it will link to python 3.9
pipenv install --python 3.10

cd project-folder

pipenv install requests

# 3.10.2 interpreter
pipenv run python main.py
```

## Running in production

I run IaaS scripts to build up new VM's on a new deploy so it may be simple

Base image is Ubuntu 20_04-lts on Azure. 20.04.4 on [Proxmox hypervisor](/2022/01/13/proxmox) in home lab.

Ubuntu 20.04 comes with Python3 pre-installed. Even after a `apt update and dist-upgrade` we only have 3.8.10. I believe I need 3.9

Lets try the simplest possible thing which is not running a virtual enviornment on prod, but install it all by hand

[Python 3.9 on Ubuntu 20](https://linuxize.com/post/how-to-install-python-3-9-on-ubuntu-20-04/)

```bash
# 3.8.10 (installed)
python3 -V

# don't want this. skip to 3.10 
sudo apt install python3.9


# then I ran my test program
git clone https://github.com/djhmateer/3pytest

# which should need the Requests module
```

I couldn't figure out why it was working without me having to import the request module. It seems I had `2.22.0` of the Requests Module. Current latest is `2.27.1` (16th March 2022)


```bash
# look for 
apt list --installed | grep request

# python3-requests-unixsocket/focal,now 0.2.0-2 all [installed,automatic]
# python3-requests/focal,now 2.22.0-2ubuntu1 all [installed,automatic]
```

lets install the latest version using pip

hmm [advice is](https://linuxize.com/post/how-to-install-pip-on-ubuntu-20.04/)

- when installing python modules globally use apt
- use pip to install globally only if no deb packages available
- prefer pip within a virtual environment only.


```bash
# install python 3.10.2
sudo add-apt-repository ppa:deadsnakes/ppa

sudo apt install python3.10

sudo apt install python3-pip

pip install requests
# Requirement already satisfied: requests in /usr/lib/python3/dist-packages (2.22.0)
```
