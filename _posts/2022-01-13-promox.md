---
layout: post
title: Promox 
description: 
menu: review
categories: Home 
published: true 
comments: false     
sitemap: false
image: /assets/2021-12-21/desk.jpg
---

<!-- [![alt text](/assets/2021-10-22/email-cover.jpg "email"){:width="800px"}](/assets/2021-10-22/email-cover.jpg) -->
<!-- [![alt text](/assets/2021-10-22/email-cover.jpg "Thanks to Solen Feyissa on unsplash - https://unsplash.com/@solenfeyissa")](https://unsplash.com/@solenfeyissa) -->


<!-- [![alt text](/assets/2021-12-21/desk.jpg "email")](/assets/2021-12-21/desk.jpg) -->

[Homelab Web Sever](/2022/01/12/home-web-server) is my previous article on setting up networking and a bare metal Ubuntu Server for hosting a website from my home.

In this article I am going to use virtualisation to let me run many virtual machines on the single bare metal server. To do this I am going to use:

[Promox VE - Virtual Environment](https://www.proxmox.com/en/proxmox-ve) is an open source server management platform for virtualisation which integrated the [KVM - Kernel Virtual Machine](https://www.linux-kvm.org/page/Main_Page) Hypervisor.

I could have used [VMWare ESXi](https://www.vmware.com/uk/products/esxi-and-esx.html)

I'm following along the excellent tutorials from which I'm updating (14th Jan 2022) [https://www.dlford.io/how-to-home-lab-part-1/](https://www.dlford.io/how-to-home-lab-part-1/)


## Install Promox
[https://www.proxmox.com/en/downloads/category/iso-images-pve](https://www.proxmox.com/en/downloads/category/iso-images-pve) Version: 7.1-2

I used [balenaEtcher](https://www.balena.io/etcher/) to create a boot USB.

### Network setup

FQDN: pve.dave.home

PVE is Promox Virtual Environment

My home subnet from DHCP on the router is: 192.168.1.0/24 ie subnet mask 255.255.255.0 ie 24 bits are used.

The DHCP range is 192.168.1.64 - 192.168.1.253

[![alt text](/assets/2022-01-13/static.jpg "static")](/assets/2022-01-13/static.jpg)

I've assigned pve to be on 192.168.1.139 and forced the DHCP table to not assign it to anything else.


## Web

[https://192.168.1.139:8006/](https://192.168.1.139:8006/)

u: root


```bash
cd /etc/apt/sources.list.d
mv pve-enterprise.list pve-enterprise.list.disabled
# careful of debian version
# version 7
echo 'deb http://download.proxmox.com/debian/pve bullseye pve-no-subscription' > pve-community.list
# version 6
echo 'deb http://download.proxmox.com/debian/pve buster pve-no-subscription' > pve-community.list
apt update
apt -y dist-upgrade
```

- Promox 7 (7th Dec 2021) runs on Bullseye (Debian 11.2, 18th Dec 2021)
- Promox 6 runs on Buster (Debian 10)
- Promox 5 runs on Stretch (Debian 9 LTS until June 2022)

Proxmox version 5 instead of 6, change “buster” to “stretch” in line three. These are version names for Debian releases, Proxmox versions 5 and 6 run on Debian Stretch and Buster respectively.

## Secure Boot Problem

[![alt text](/assets/2022-01-13/boot.jpg "secure boot"){:width="500px"}](/assets/2022-01-13/boot.jpg)

After rebooting from updated above I got a Secure Boot Violation warning from my BIOS

The solution was to go into the BIOS - Boot, then change the order of the boot devices to be the M2 drive and not the UEFI boot loader device.

## Create a VM

[![alt text](/assets/2022-01-13/upload.jpg "upload")](/assets/2022-01-13/upload.jpg)

Upload ISO from workstation

Create VM:

- Name: webserver-test
- OS: Ubuntu (just uploaded)
- Disks: 32GB (Default)
- CPU: 1 Socket, 2 Cores
- Memory: 2048MB (Default)


[![alt text](/assets/2022-01-13/start.jpg "start")](/assets/2022-01-13/start.jpg)

Start it

[![alt text](/assets/2022-01-13/start.jpg "start")](/assets/2022-01-13/start.jpg)

It works! However

Got a DHCP address of: 192.168.1.140/24 which is an address gives from the routers DHCP server.

Ubuntu server install

server name: webserver-test-ubuntu
u: dave


put on SSH Server too.

[![alt text](/assets/2022-01-13/ssh.jpg "ssh")](/assets/2022-01-13/ssh.jpg)

After the Ubuntu server installtion completes (a few minutes), and a reboot, I could access the VM from my workstation

[![alt text](/assets/2022-01-13/wired.jpg "wired routes")](/assets/2022-01-13/wired routes.jpg)

Can see the pve hypervisor on .139, and the newly created VM with it's correct linux servername I gave above when I named the server (not in pve).

```bash
sudo apt update -y
sudo apt upgrade -y

sudo apt-get install nginx -y
```

I 

## Snapshots VS Backups
asdf

## PFSense

[https://www.dlford.io/pfsense-nat-how-to-home-lab-part-3/](https://www.dlford.io/pfsense-nat-how-to-home-lab-part-3/)

asdf

## Template Server VM


## Resources

[https://mtlynch.io/building-a-vm-homelab/](https://mtlynch.io/building-a-vm-homelab/) - he uses promox

[https://www.youtube.com/user/ProxmoxVE/videos](https://www.youtube.com/user/ProxmoxVE/videos) - PromoxVE YouTube

## Remote Admin

[https://tinypilotkvm.com/](https://tinypilotkvm.com/) looks very good. 